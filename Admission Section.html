<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admission Section</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Inter', sans-serif;
    }
  </style>
</head>

<body class="bg-gray-100 min-h-screen p-6">
  <div class="max-w-4xl mx-auto bg-white rounded-lg shadow-md p-6">
    <h2 class="text-2xl font-bold text-indigo-700 mb-6">Admission Section</h2>
    <form id="admission-form" class="space-y-4">
      <div>
        <label for="student-name" class="block text-sm font-medium text-gray-700">Student Name</label>
        <input type="text" id="student-name" name="student-name" required class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500" />
      </div>
      <div>
        <label for="admission-type" class="block text-sm font-medium text-gray-700">Admission Type</label>
        <select id="admission-type" name="admission-type" required class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500">
          <option value="online">Online</option>
          <option value="offline">Offline</option>
        </select>
      </div>
      <button type="submit" class="bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700 transition">Submit Admission</button>
    </form>

    <div class="mt-8">
      <input type="text" id="search-input" placeholder="Search..." class="w-full p-2 border border-gray-300 rounded mb-4" />
      <div class="overflow-x-auto">
        <table id="admission-table" class="min-w-full bg-white border border-gray-200 rounded-lg">
          <thead>
            <tr class="bg-gray-100">
              <th class="px-4 py-2 text-left">#</th>
              <th class="px-4 py-2 text-left">Student Name</th>
              <th class="px-4 py-2 text-left">Admission Type</th>
              <th class="px-4 py-2 text-left">Action</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-gray-200">
            <!-- Records inserted dynamically -->
          </tbody>
        </table>
      </div>
      <div class="mt-4 flex justify-between items-center">
        <button onclick="clearAllRecords()" class="bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600">Clear All</button>
        <div id="pagination" class="flex gap-2"></div>
      </div>
    </div>
  </div>

  <script>
    const form = document.getElementById("admission-form");
    const tableBody = document.querySelector("#admission-table tbody");
    const searchInput = document.getElementById("search-input");
    const pagination = document.getElementById("pagination");
    let admissions = [];
    let currentPage = 1;
    const pageSize = 5;
    let filteredIndexes = null;

    form.addEventListener("submit", function (e) {
      e.preventDefault();
      const name = document.getElementById("student-name").value.trim();
      const type = document.getElementById("admission-type").value;
      if (!name) return alert("Please enter student name.");
      admissions.push({ name, type });
      currentPage = Math.ceil(admissions.length / pageSize);
      renderTable();
      form.reset();
    });

    function renderTable(data = admissions) {
      const start = (currentPage - 1) * pageSize;
      const paginatedData = data.slice(start, start + pageSize);
      tableBody.innerHTML = "";

      paginatedData.forEach((record, index) => {
        const globalIndex = admissions.indexOf(record);
        const row = `<tr>
          <td class="px-4 py-2">${start + index + 1}</td>
          <td class="px-4 py-2">${record.name}</td>
          <td class="px-4 py-2">${record.type}</td>
          <td class="px-4 py-2 space-x-2">
            <button onclick="editRecord(${globalIndex})" class="text-blue-600 hover:underline">Edit</button>
            <button onclick="deleteRecord(${globalIndex})" class="text-red-600 hover:underline">Delete</button>
          </td>
        </tr>`;
        tableBody.insertAdjacentHTML("beforeend", row);
      });

      if (data === admissions) {
        filteredIndexes = null;
        renderPagination();
      } else {
        filteredIndexes = data.map(d => admissions.indexOf(d));
        pagination.innerHTML = "";
      }
    }

    function editRecord(index) {
      const record = admissions[index];
      const newName = prompt("Edit Student Name:", record.name);
      const newType = prompt("Edit Admission Type (online/offline):", record.type);
      if (newName && newType) {
        admissions[index] = { name: newName.trim(), type: newType.trim().toLowerCase() };
        renderTable(filteredIndexes ? filteredIndexes.map(i => admissions[i]) : admissions);
        alert("Record updated successfully!");
      }
    }

    function deleteRecord(index) {
      if (confirm("Are you sure you want to delete this record?")) {
        admissions.splice(index, 1);
        if (currentPage > Math.ceil(admissions.length / pageSize)) currentPage--;
        renderTable(filteredIndexes ? filteredIndexes.map(i => admissions[i]) : admissions);
        alert("Record deleted successfully!");
      }
    }

    function clearAllRecords() {
      if (confirm("Are you sure you want to delete all records?")) {
        admissions = [];
        currentPage = 1;
        renderTable();
        alert("All records have been cleared.");
      }
    }

    searchInput.addEventListener("input", function () {
      const term = this.value.toLowerCase().trim();
      if (term === "") {
        renderTable(admissions);
      } else {
        const filtered = admissions.filter(r => r.name.toLowerCase().includes(term) || r.type.toLowerCase().includes(term));
        currentPage = 1;
        renderTable(filtered);
      }
    });

    function renderPagination() {
      pagination.innerHTML = "";
      const totalPages = Math.ceil(admissions.length / pageSize);
      for (let i = 1; i <= totalPages; i++) {
        const btn = document.createElement("button");
        btn.textContent = i;
        btn.className = `px-3 py-1 border rounded ${currentPage === i ? 'bg-indigo-600 text-white' : 'bg-white text-indigo-600 border-indigo-600'} hover:bg-indigo-700 hover:text-white`;
        btn.onclick = () => {
          currentPage = i;
          renderTable();
        };
        pagination.appendChild(btn);
      }
    }
  </script>
</body>

</html>
